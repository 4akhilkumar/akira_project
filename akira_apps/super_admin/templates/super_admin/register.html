{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <meta name="theme-color" content="#FFF"/>
    <meta name="description" content="AkirA is a kind of Learning Management System which can be accessible in all your devices Android, iOS, and desktop devices.">

    <link rel="stylesheet" href="{% static 'styles/admin_register.css' %}">
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">

    <link rel="apple-touch-icon" href="{% static 'images/AkirA-Logo V2.0.png' %}" type="image/icon type">
    <link rel="icon" href="{% static 'images/AkirA-Logo V2.0.png' %}" type="image/icon type">

    <title>Admin Registration - AkirA</title>
</head>
<body class="personalsection">
    {% include 'messages.html' %}

    {% include 'check_internet_connection.html' %}

    <div class="main">
        <div class="container-fluid">
            <div class="regiserformcontainer">
                <h2 id="heading">Create Your <span class="akira">AkirA</span> Admin. Account</h2>
                <p class="note">Fill all the fields to create admin. account</p>
                <form id="msform" action="" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <!-- progressbar -->
                    <ul id="progressbar">
                        <li class="active" id="account"><strong>Personal</strong></li>
                        <li id="personal"><strong>Account</strong></li>
                        <li id="institute"><strong>Institute</strong></li>
                        <li id="confirm"><strong>T&C</strong></li>
                    </ul>
                    <!-- fieldsets -->
                    <fieldset>
                        <div class="form-card">
                            <div class="">
                                <div class="">
                                    <h2 class="fs-title">Personal Information</h2>
                                </div>
                            </div> 

                            <div class="input-box active-grey">
                                <label class="fieldlabels input-label">Name prefix</label>
                                <select name="name_prefix" id="id_name_prefix" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    {% for x,y in name_prefix.fields.nameprefix.choices %}
                                    <option value="{{ x }}">{{ y }}</option>
                                    {% endfor %}
                                </select>
                                <span class="error-text">Select the name prefix</span>
                            </div>

                            <div class="first-last-name">
                                <div class="input-box">
                                    <label class="fieldlabels input-label">First name</label>
                                    <input type="text" name="firstname" id="id_firstname" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    <span class="error-text">Enter your first name</span>
                                </div>
                                <div class="input-box">
                                    <label class="fieldlabels input-label">Last name</label> 
                                    <input type="text" name="lastname" id="id_lastname" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    <span class="error-text">Enter your last name</span>
                                </div>
                            </div>
                            
                            <div class="input-box active-grey">
                                <label class="fieldlabels input-label" for="date_of_birth">Date of birth</label>
                                <input type="date" name="date_of_birth" id="id_date_of_birth" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                <span class="error-text">Enter your date of birth</span>
                            </div>
                                
                            <div class="gender-phone">
                                <div class="input-box active-grey">
                                    <label class="fieldlabels input-label" for="gender">Gender</label>
                                    <select name="gender" class="input-1" id="id_gender" required>
                                        {% for x,y in gender.fields.gender.choices %}
                                        <option value="{{ x }}">{{ y }}</option>
                                        {% endfor %}
                                    </select>
                                    <span class="error-text">Select your gender</span>
                                </div>
                                
                                <div class="input-box">    
                                    <label class="fieldlabels input-label" for="phone">Phone number</label>
                                    <input type="tel" name="phone" id="id_phone" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    <span class="error-text">Enter your phone number</span>              
                                </div>
                            </div>
                            
                            <div class="door-flat-no-zip-code">
                                <div class="input-box">
                                    <label class="fieldlabels input-label" for="door_no">Door No./Flat No.</label>
                                    <input type="text" name="door_no" id="id_door_no" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    <span class="error-text">Enter your door no./flat no.</span>
                                </div>
                                <div class="input-box">
                                    <label class="fieldlabels input-label" for="zip_code">Zip code</label>
                                    <input type="text" name="zip_code" id="id_zip_code" pattern="[0-9]*" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    <span class="error-text">Enter your zip code</span>
                                </div>
                            </div>
                            
                            <div class="city-district">
                                <div class="input-box">
                                    <label class="fieldlabels input-label" for="city">City</label>
                                    <input type="text" name="city" id="id_city" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    <span class="error-text">Enter your city</span>
                                </div>
                                <div class="input-box">
                                    <label class="fieldlabels input-label" for="district">District</label>
                                    <input type="text" name="district" id="id_district" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    <span class="error-text">Enter your district</span>
                                </div>
                            </div>
                            
                            <div class="state-country">
                                <div class="input-box">
                                    <label class="fieldlabels input-label" for="state">State</label>
                                    <input type="text" name="state" id="id_state" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    <span class="error-text">Enter your state</span>
                                </div>
                                <div class="input-box">
                                    <label class="fieldlabels input-label" for="country">Country</label>
                                    <input type="text" name="country" id="id_country" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                    <span class="error-text">Enter your country</span>
                                </div>
                            </div>
                            <div class="input-box active-grey-1">
                                <label class="fieldlabels input-label">Upload your photo</label>
                                <input type="file" name="photo" accept="image/*" id="id_photo" class="input-1 custom-input-file" required>
                                <span class="error-text">Upload your photo</span>
                            </div>
                        </div>
                        <input type="button" name="next" id="personal-next" class="next action-button" value="Next" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <div class="">
                                <div class="">
                                    <h2 class="fs-title">Account Information</h2>
                                </div>
                            </div> 

                            <div class="input-box">
                                <label class="fieldlabels input-label">Email</label>
                                <input type="email" name="email" id="id_email" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                <span class="help-text">Please use legitimate email only</span>
                                <span class="error-text">Enter your email</span>
                            </div>
                            <div class="input-box">
                                <label class="fieldlabels input-label">Username</label>
                                <input type="text" name="username" id="id_username" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                <span class="help-text">You can use letters, numbers & periods</span>
                                <span class="error-text">Enter your username</span>
                            </div>
                            <div class="input-box">
                                <label class="fieldlabels input-label">Password</label>
                                <input type="password" name="password" id="id_password" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                <span class="help-text">Use 8 or more characters with a mix of letters, numbers & symbols[!, @, #]</span>
                                <span class="error-text">Enter a strong password</span>
                            </div>
                            <div class="input-box">
                                <label class="fieldlabels input-label">Confirm password</label>
                                <input type="password" name="confirm_password" id="id_confirm_password" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                <span class="error-text">Those passwords didn’t match. Try again.</span>
                            </div>
                        </div> 
                        <input type="button" name="next" id="account-next" class="next action-button" value="Next" /> 
                        <input type="button" name="previous" id="account-previous" class="previous action-button-previous" value="Previous" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <div class="">
                                <div class="">
                                    <h2 class="fs-title">About Institute</h2>
                                </div>
                            </div> 
                            
                            <div class="input-box">
                                <label class="fieldlabels input-label">Institute code</label> 
                                <input type="text" name="institute_code" id="id_institute_code" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                <span class="help-text">Please provide the institute code provided by the Govt.</span>
                                <span class="error-text">Enter a your Institute code</span>
                            </div>
                            <div class="input-box">
                                <label class="fieldlabels input-label" for="institute_name">Institute name</label>
                                <input type="text" name="institute_name" id="id_institute_name" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                <span class="error-text">Enter a your Institute name</span>
                            </div>
                            <div class="input-box">
                                <label class="fieldlabels input-label" for="institute_address">Institute address</label>
                                <input type="text" name="institute_address" id="id_institute_address" class="input-1" onfocus="setFocus(true)" onblur="setFocus(false)" required>
                                <span class="error-text">Enter a your Institute address</span>
                            </div>
                        </div> 
                        <input type="button" name="next" id="institute-next" class="next action-button last-next" value="Next" /> 
                        <input type="button" name="previous" id="institute-previous" class="previous action-button-previous" value="Previous" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <div class="">
                                <div class="">
                                    <h2 class="fs-title">Terms and Conditions</h2>
                                </div>
                            </div> 
                            <div class="">
                                <div class="">
                                    <h4 class="purple-text tandc">
                                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt nisi aliquam, consequatur sequi consectetur nemo quasi excepturi non consequuntur culpa est, tenetur, officia optio. Tempora ratione dolores numquam explicabo commodi est amet minima saepe sunt at voluptatum, iure recusandae, qui repellat doloremque harum, sit veniam temporibus! Quis cumque, mollitia maiores fugit, in ipsum soluta consequatur ab suscipit similique enim reiciendis!
                                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt nisi aliquam, consequatur sequi consectetur nemo quasi excepturi non consequuntur culpa est, tenetur, officia optio. Tempora ratione dolores numquam explicabo commodi est amet minima saepe sunt at voluptatum, iure recusandae, qui repellat doloremque harum, sit veniam temporibus! Quis cumque, mollitia maiores fugit, in ipsum soluta consequatur ab suscipit similique enim reiciendis!
                                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt nisi aliquam, consequatur sequi consectetur nemo quasi excepturi non consequuntur culpa est, tenetur, officia optio. Tempora ratione dolores numquam explicabo commodi est amet minima saepe sunt at voluptatum, iure recusandae, qui repellat doloremque harum, sit veniam temporibus! Quis cumque, mollitia maiores fugit, in ipsum soluta consequatur ab suscipit similique enim reiciendis!
                                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt nisi aliquam, consequatur sequi consectetur nemo quasi excepturi non consequuntur culpa est, tenetur, officia optio. Tempora ratione dolores numquam explicabo commodi est amet minima saepe sunt at voluptatum, iure recusandae, qui repellat doloremque harum, sit veniam temporibus! Quis cumque, mollitia maiores fugit, in ipsum soluta consequatur ab suscipit similique enim reiciendis!
                                    </h4>
                                    <h4 class="purple-text bold">By creating the admin. account in <span class="akira">AkirA</span> application, you agree to our above mentioned T&C.</h4>
                                </div>
                            </div>
                        </div>
                        <input type="submit" name="submit" class="action-button register-btn" value="Register" />
                        <input type="button" name="previous" id="tandc-previous" class="previous action-button-previous last-previous" value="Previous" />
                    </fieldset>
                </form>
            </div>
        </div>
    </div>

    <script>
        function setFocus(on) {
            var element = document.activeElement;
            if (on) {
                setTimeout(function () {
                element.parentNode.classList.add("focus");
                });
            } else {
                let box = document.querySelector(".input-box");
                box.classList.remove("focus");
                $("input").each(function () {
                var $input = $(this);
                var $parent = $input.closest(".input-box");
                if ($input.val()) $parent.addClass("focus");
                else $parent.removeClass("focus");
                });
            }
        }
    </script>

    <script>
        $(document).ready(function() {
            var current_fs, next_fs, previous_fs; //fieldsets
            var opacity;
            var steps = $("fieldset").length;
            
            $("#personal-next").prop("disabled", true);
            var personal_next_btn = false;

            var nameprefix = false; var firstname = false; var lastname = false; var dateofbirth = false;
            var gender = false; var phone = false; var doorno = false; var zipcode = false;
            var city = false; var district = false; var state = false; var country = false;
            var photo = false;

            $('#id_name_prefix').on('keyup keypress blur change', function() {
                if ($("#id_name_prefix").val() == "") {
                    $("#id_name_prefix").parent().find(".error-text").css("display", "block");
                    nameprefix = false;
                } else {
                    $("#id_name_prefix").parent().find(".error-text").css("display", "none");
                    nameprefix = true;
                }
            });

            $('#id_firstname').on('keyup keypress blur change', function() {
                if($("#id_firstname").val() == "") {
                    $("#id_firstname").parent().find(".error-text").html("Enter your first name.");
                    $("#id_firstname").parent().find(".error-text").css("display", "block");
                    firstname = false;
                }
                else if (!$("#id_firstname").val().match(/^[A-Za-z\s]*$/)) {
                    $("#id_firstname").parent().find(".error-text").html("Are you sure that you've entered your name correctly?");
                    $("#id_firstname").parent().find(".error-text").css("display", "block");
                    firstname = false;
                } 
                else {
                    $("#id_firstname").parent().find(".error-text").css("display", "none");
                    firstname = true;
                }
            });

            $('#id_lastname').on('keyup keypress blur change', function() {
                if($("#id_lastname").val() == "") {
                    $("#id_lastname").parent().find(".error-text").html("Enter your last name.");
                    $("#id_lastname").parent().find(".error-text").css("display", "block");
                    lastname = false;
                }
                else if (!$("#id_lastname").val().match(/^[A-Za-z\s]*$/)) {
                    $("#id_lastname").parent().find(".error-text").html("Are you sure that you've entered your surname correctly?");
                    $("#id_lastname").parent().find(".error-text").css("display", "block");
                    lastname = false;
                }
                else {
                    $("#id_lastname").parent().find(".error-text").css("display", "none");
                    lastname = true;
                }
            });

            $('#id_date_of_birth').on('keyup keypress blur change', function() {
                if ($("#id_date_of_birth").val() == "") {
                    $("#id_date_of_birth").parent().find(".error-text").css("display", "block");
                    dateofbirth = false;
                }
                else {
                    $("#id_date_of_birth").parent().find(".error-text").css("display", "none");
                    dateofbirth = true;
                }
            });

            $('#id_gender').on('keyup keypress blur change', function() {
                if ($("#id_gender").val() == "") {
                    $("#id_gender").parent().find(".error-text").css("display", "block");
                    gender = false;
                } else {
                    $("#id_gender").parent().find(".error-text").css("display", "none");
                    gender = true;
                }
            });

            $('#id_phone').on('keyup keypress blur change', function() {
                if ($("#id_phone").val() == "") {
                    $("#id_phone").parent().find(".error-text").html("Enter your phone number.");
                    $("#id_phone").parent().find(".error-text").css("display", "block");
                    phone = false;
                }
                else if (!/^\d{10}$/.test($("#id_phone").val())) {
                    $("#id_phone").parent().find(".error-text").html("Are you sure that you've entered your phone no. correctly?");
                    $("#id_phone").parent().find(".error-text").css("display", "block");
                    phone = false;
                }
                else {
                    $("#id_phone").parent().find(".error-text").css("display", "none");
                    phone = true;
                }
            });

            $('#id_door_no').on('keyup keypress blur change', function() {
                if ($("#id_door_no").val() == "") {
                    $("#id_door_no").parent().find(".error-text").css("display", "block");
                    doorno = false;
                }
                else if (!/^[A-Za-z0-9-\s]*$/.test($("#id_door_no").val())) {
                    $("#id_door_no").parent().find(".error-text").html("Are you sure that you've entered your door no./flat no. correctly?");
                    $("#id_door_no").parent().find(".error-text").css("display", "block");
                    doorno = false;
                }
                else {
                    $("#id_door_no").parent().find(".error-text").css("display", "none");
                    doorno = true;
                }
            });

            $('#id_zip_code').on('keyup keypress blur change', function() {
                if ($("#id_zip_code").val() == "") {
                    $("#id_zip_code").parent().find(".error-text").css("display", "block");
                    zipcode = false;
                }
                else if (!/^\d{6}$/.test($("#id_zip_code").val())) {
                    $("#id_zip_code").parent().find(".error-text").html("Are you sure that you've entered your zip code correctly?");
                    $("#id_zip_code").parent().find(".error-text").css("display", "block");
                    zipcode = false;
                }
                else {
                    $("#id_zip_code").parent().find(".error-text").css("display", "none");
                    zipcode = true;
                }
            });

            $('#id_city').on('keyup keypress blur change', function() {
                if ($("#id_city").val() == "") {
                    $("#id_city").parent().find(".error-text").css("display", "block");
                    city = false;
                }
                else if (!$("#id_city").val().match(/^[A-Za-z\s]*$/)) {
                    $("#id_city").parent().find(".error-text").html("Are you sure that you've entered your city name correctly?");
                    $("#id_city").parent().find(".error-text").css("display", "block");
                    city = false;
                }
                else {
                    $("#id_city").parent().find(".error-text").css("display", "none");
                    city = true;
                }
            });

            $('#id_district').on('keyup keypress blur change', function() {
                if ($("#id_district").val() == "") {
                    $("#id_district").parent().find(".error-text").css("display", "block");
                    district = false;
                }
                else if (!$("#id_district").val().match(/^[A-Za-z\s]*$/)) {
                    $("#id_district").parent().find(".error-text").html("Are you sure that you've entered your district name correctly?");
                    $("#id_district").parent().find(".error-text").css("display", "block");
                    district = false;
                }
                else {
                    $("#id_district").parent().find(".error-text").css("display", "none");
                    district = true;
                }
            });

            $('#id_state').on('keyup keypress blur change', function() {
                if ($("#id_state").val() == "") {
                    $("#id_state").parent().find(".error-text").css("display", "block");
                    state = false;
                }
                else if (!$("#id_state").val().match(/^[A-Za-z\s]*$/)) {
                    $("#id_state").parent().find(".error-text").html("Are you sure that you've entered your state name correctly?");
                    $("#id_state").parent().find(".error-text").css("display", "block");
                    state = false;
                }
                else {
                    $("#id_state").parent().find(".error-text").css("display", "none");
                    state = true;
                }
            });

            $('#id_country').on('keyup keypress blur change', function() {
                if ($("#id_country").val() == "") {
                    $("#id_country").parent().find(".error-text").css("display", "block");
                    country = false;
                }
                else if (!$("#id_country").val().match(/^[A-Za-z\s]*$/)) {
                    $("#id_country").parent().find(".error-text").html("Are you sure that you've entered your country name correctly?");
                    $("#id_country").parent().find(".error-text").css("display", "block");
                    country = false;
                }
                else {
                    $("#id_country").parent().find(".error-text").css("display", "none");
                    country = true;
                }
            });

            $('#id_photo').on('keyup keypress blur change', function() {
                if ($("#id_photo").val() == "") {
                    $("#id_photo").parent().find(".error-text").css("display", "block");
                    photo = false;
                } else {
                    $("#id_photo").parent().find(".error-text").css("display", "none");
                    photo = true;
                }
            });

            $('input, select').on('keyup keypress blur change', function() {
                if (nameprefix == true && firstname == true && lastname == true && dateofbirth == true && gender == true && phone == true && doorno == true && zipcode == true && city == true && district == true && state == true && country == true && photo == true) {
                    personal_next_btn = true;
                }
                else {
                    personal_next_btn = false;
                }
                if (personal_next_btn == true) {
                    $("#personal-next").prop("disabled", false);
                }
                else {
                    $("#personal-next").prop("disabled", true);
                }
            });

            $("#account-next").prop("disabled", true);
            var account_next_btn = false;
            var email = false; var username = false; 
            var password = false; var confirmpassword = false;

            $('#id_email').on('keyup keypress blur change', function() {
                if ($("#id_email").val() == "") {
                    $("#id_email").parent().find(".error-text").css("display", "block");
                    email = false;
                }
                else if (!$("#id_email").val().match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/)) {
                    $("#id_email").parent().find(".error-text").html("Are you sure that you've entered your email address correctly?");
                    $("#id_email").parent().find(".error-text").css("display", "block");
                    email = false;
                } 
                else {
                    $("#id_email").parent().find(".error-text").css("display", "none");
                    email = true;
                }
            });

            $('#id_username').on('keyup keypress blur change', function() {
                if ($("#id_username").val() == "") {
                    $("#id_username").parent().find(".error-text").css("display", "block");
                    $("#id_username").parent().find(".error-text").html("Enter your username");
                    username = false;
                }
                else if ($("#id_username").val().length < 6) {
                    $("#id_username").parent().find(".error-text").css("display", "block");
                    $("#id_username").parent().find(".error-text").html("Username must be minimum of 6 characters");
                    username = false;
                }
                else {
                    $("#id_username").parent().find(".error-text").css("display", "none");
                    username = true;
                }
            });

            $('#id_password').on('keyup keypress blur change', function() {
                if ($("#id_password").val() == "") {
                    $("#id_password").parent().find(".error-text").css("display", "block");
                    $("#id_password").parent().find(".error-text").html("Enter your password");
                    password = false;
                }
                else if (!$("#id_password").val().match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#])[A-Za-z\d!@#]{8,18}/)) {
                    $("#id_password").parent().find(".error-text").html("Password must contain at least 8 characters, 1 uppercase, 1 lowercase, 1 number and 1 special character [!, @, #]");
                    $("#id_password").parent().find(".error-text").css("display", "block");
                    password = false;
                }
                else {
                    $("#id_password").parent().find(".error-text").css("display", "none");
                    password = true;
                }
            });

            $('#id_confirm_password').on('keyup keypress blur change', function() {
                if ($("#id_confirm_password").val() != $("#id_password").val()) {
                    $("#id_confirm_password").parent().find(".error-text").html("Those passwords didn’t match. Try again.");
                    $("#id_confirm_password").parent().find(".error-text").css("display", "block");
                    confirmpassword = false;
                }
                else {
                    $("#id_confirm_password").parent().find(".error-text").css("display", "none");
                    confirmpassword = true;
                }
            });

            $('input, select').on('keyup keypress blur change', function() {
                if (email == true && username == true && password == true && confirmpassword == true) {
                    account_next_btn = true;
                }
                else {
                    account_next_btn = false;
                }
                if (account_next_btn == true) {
                    $("#account-next").prop("disabled", false);
                }
                else {
                    $("#account-next").prop("disabled", true);
                }
            });

            $("#institute-next").prop("disabled", true);
            var institute_next_btn = false;
            var institutecode = false; var institutename = false; var instituteaddress = false;

            $('#id_institute_code').on('keyup keypress blur change', function() {
                if ($("#id_institute_code").val() == "") {
                    $("#id_institute_code").parent().find(".error-text").html("Enter your institute code");
                    $("#id_institute_code").parent().find(".error-text").css("display", "block");
                    institutecode = false;
                }
                else if (!$("#id_institute_code").val().match(/^[A-Za-z0-9-\s]*$/)) {
                    $("#id_institute_code").parent().find(".error-text").html("Are you sure that you've entered your institute code correctly?");
                    $("#id_institute_code").parent().find(".error-text").css("display", "block");
                    institutecode = false;
                }
                else {
                    $("#id_institute_code").parent().find(".error-text").css("display", "none");
                    institutecode = true;
                }
            });

            $('#id_institute_name').on('keyup keypress blur change', function() {
                if ($("#id_institute_name").val() == "") {
                    $("#id_institute_name").parent().find(".error-text").css("display", "block");
                    institutename = false;
                }
                else if(!$("#id_institute_name").val().match(/^[a-z0-9\d\-_\s]+$/i)) {
                    $("#id_institute_name").parent().find(".error-text").html("Are you sure that you've entered your institute name correctly?");
                    $("#id_institute_name").parent().find(".error-text").css("display", "block");
                    institutename = false;
                }
                else {
                    $("#id_institute_name").parent().find(".error-text").css("display", "none");
                    institutename = true;
                }
            });

            $('#id_institute_address').on('keyup keypress blur change', function() {
                if ($("#id_institute_address").val() == "") {
                    $("#id_institute_address").parent().find(".error-text").css("display", "block");
                    instituteaddress = false;
                }
                else if ($("#id_institute_address").val().length < 8) {
                    $("#id_institute_address").parent().find(".error-text").html("Enter a valid address.");
                    $("#id_institute_address").parent().find(".error-text").css("display", "block");
                    instituteaddress = false;
                }
                else if(!$("#id_institute_address").val().match(/^[a-z\d\-_\s]+$/i)) {
                    $("#id_institute_address").parent().find(".error-text").html("Are you sure that you've entered your institute address correctly?");
                    $("#id_institute_address").parent().find(".error-text").css("display", "block");
                    instituteaddress = false;
                }
                else {
                    $("#id_institute_address").parent().find(".error-text").css("display", "none");
                    instituteaddress = true;
                }
            });

            $('input, select').on('keyup keypress blur change', function() {
                if (institutecode == true && institutename == true && instituteaddress == true) {
                    institute_next_btn = true;
                }
                else {
                    institute_next_btn = false;
                }
                if (institute_next_btn == true) {
                    $("#institute-next").prop("disabled", false);
                }
                else {
                    $("#institute-next").prop("disabled", true);
                }
            });

            $(".next").click(function() {
                current_fs = $(this).parent();
                next_fs = $(this).parent().next();

                //Add Class Active
                if ($(this).attr('id') == 'personal-next') {
                    $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("account-section");
                    $("body").removeClass();
                    $("body").addClass("accountsection");
                } else if ($(this).attr('id') == 'account-next') {
                    $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("institute-section");
                    $("body").removeClass();
                    $("body").addClass("institutesection");
                } else if ($(this).attr('id') == 'institute-next') {
                    $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("tandc-section");
                    $("body").removeClass();
                    $("body").addClass("tandcsection");
                }

                //show the next fieldset
                next_fs.show();
                //hide the current fieldset with style
                current_fs.animate({opacity: 0}, {
                    step: function(now) {
                        // for making fielset appear animation
                        opacity = 1 - now;

                        current_fs.css({
                            'display': 'none',
                            'position': 'relative'
                        });
                        next_fs.css({'opacity': opacity});
                    }, duration: 500
                });


            });

            $(".previous").click(function(){
                current_fs = $(this).parent();
                previous_fs = $(this).parent().prev();

                //Remove class active
                if ($(this).attr('id') == 'account-previous') {
                    $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("account-section");
                    $("body").removeClass();
                    $("body").addClass("personalsection");
                } else if ($(this).attr('id') == 'institute-previous') {
                    $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("institute-section");
                    $("body").removeClass();
                    $("body").addClass("accountsection");
                } else if ($(this).attr('id') == 'tandc-previous') {
                    $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("tandc-section");
                    $("body").removeClass();
                    $("body").addClass("institutesection");
                }


                //show the previous fieldset
                previous_fs.show();

                //hide the current fieldset with style
                current_fs.animate({opacity: 0}, {
                    step: function(now) {
                        // for making fielset appear animation
                        opacity = 1 - now;

                        current_fs.css({
                            'display': 'none',
                            'position': 'relative'
                        });
                        previous_fs.css({'opacity': opacity});
                    }, duration: 500
                });
            });

            // If the user clicks the button class "last-next" then hide the class note and if user clicks the button class "last-previous" then show the class note
            $(".last-next").click(function(){
                $(".note").hide();
                // scroll page to bottom
                $('html, body').animate({
                    scrollTop: $(document).height()
                }, 'slow');
            });
            
            $(".last-previous").click(function(){
                $(".note").show();
            });

        });
    </script>
</body>
</html>